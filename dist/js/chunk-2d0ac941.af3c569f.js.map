{"version":3,"sources":["webpack:///./src/pages/loginPage.vue","webpack:///./src/pages/loginPage.vue?686e"],"names":["style","page-title","page-default-back-link","size","src","loginError","placeholder","userInfo","username","type","password","expand","loginSubmit","slot","icon","lockOpenOutline","name","components","IonInput","IonItem","IonImg","setup","router","data","timeOutline","alarmOutline","img","schools","school","methods","loadToken","token","localStorage","getItem","console","log","createStorage","setItem","this","$store","getters","getToken","getSchools","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","ok","error","message","status","Promise","reject","commit","$router","push","catch","errorMessage","mounted","render"],"mappings":"2IAKQ,eAEK,UAFD,wBAEJ,G,SAoBMA,MAAA,sD,iBAiBoD,W,4TA3ClE,eAgDc,GAhDDC,aAAW,GAAGC,yBAAuB,K,yBAChD,iBAqCW,CArCX,eAqCW,Q,wBApCT,iBAmCU,CAnCV,eAmCU,Q,wBAlCR,iBAiCU,CAjCV,eAiCU,GAjCDC,KAAK,KAAKH,MAAA,yB,yBACjB,iBAEK,CAFL,EAIE,eAGW,GAFTI,IAAI,oCACJJ,MAAA,wBAgBsE,GAAV,EAAAK,Y,iBAA9D,eAAmH,KAAnH,EAAkF,iC,sBACpF,eAGW,GAHDL,MAAA,oBAAuB,C,wBAE/B,iBAAuE,CAAvE,eAAuE,GAA5DM,YAAY,Q,WAAiB,EAAAC,SAASC,S,qDAAT,EAAAD,SAASC,SAAQ,K,iCAE3D,eAGW,GAHDR,MAAA,oBAAuB,C,wBAE/B,iBAA4F,CAA5F,eAA4F,GAAjFM,YAAY,WAAWG,KAAK,W,WAAoB,EAAAF,SAASG,S,qDAAT,EAAAH,SAASG,SAAQ,K,+DAMpF,eAQC,Q,wBAPE,iBAMS,CANT,eAMS,GANAP,KAAK,KAAKH,MAAA,yB,yBAEhB,iBAGW,CAHX,eAGW,GAHCW,OAAO,QAAS,QAAK,+BAAE,EAAAC,gBAAeZ,MAAA,6C,yBAClD,iBAA0D,CAA1D,eAA0D,GAAhDa,KAAK,QAASC,KAAM,EAAAC,iB,mIAgBvB,GACbC,KAAM,QACNC,WAAY,CAAEC,SAAA,OAAUC,QAAA,OAASC,OAAA,QACjCC,MAHa,WAIX,IAAMC,EAAS,iBACf,MAAO,CAAEA,WAEXC,KAPa,WAQX,MAAO,CACLR,gBAAA,OACAS,YAAA,OACAC,aAAA,OACAC,IAAK,oCACLC,QAAQ,GACRC,OAAO,GACPvB,YAAY,EACZE,SAAU,CACRC,SAAU,GACVE,SAAU,MAIhBmB,QAAS,CAQPC,UARO,WASH,IAAIC,EAAQC,aAAaC,QAAQ,SACjCC,QAAQC,IAAIJ,IAGhBK,cAbO,WAeHJ,aAAaK,QAAQ,QAASC,KAAKC,OAAOC,QAAQC,UAClDP,QAAQC,IAAI,gCAKhBO,WArBO,aAyBP9B,YAzBO,WAyBM,WACL+B,EAAiB,CACrBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,mBACjB,cAAiB,gBAC3BC,KAAMC,KAAKC,UAAU,CAAC,SAAWV,KAAK/B,SAASC,SAAS,SAAW8B,KAAK/B,SAASG,YAMnFuC,MAAM,wCAAyCN,GAC5CO,KADH,yDACQ,WAAMC,GAAN,yGACeA,EAASC,OADxB,UACE7B,EADF,OAIC4B,EAASE,GAJV,uBAMIC,EAAS/B,GAAQA,EAAKgC,SAAYJ,EAASK,OAN/C,kBAOKC,QAAQC,OAAOJ,IAPpB,OAUJ,EAAKf,OAAOoB,OAAO,WAAWpC,EAAKQ,OAEnCG,QAAQC,IAAI,kBAAkB,EAAKI,OAAOC,QAAQC,UAElD,EAAKL,gBACL,EAAKwB,QAAQC,KAAK,cAfd,4CADR,uDAoBGC,OAAM,SAAAR,GACL,EAAKS,aAAeT,EACpBpB,QAAQoB,MAAM,sBAAuBA,GACrC,EAAKjD,YAAa,EAGlB,EAAKuD,QAAQC,KAAK,mBAuC1BG,QAAS,WACP1B,KAAKR,YACLI,QAAQC,IAAI,wBCtLhB,EAAO8B,OAASA,EAED","file":"js/chunk-2d0ac941.af3c569f.js","sourcesContent":["<template>\r\n<base-layout page-title=\"\" page-default-back-link=\"/\">\r\n  <ion-grid>\r\n    <ion-row>\r\n      <ion-col size=\"12\" style=\"text-align: center\">\r\n        <h1>\r\n          Student Attendance\r\n        </h1>\r\n        \r\n          <ion-img\r\n            src=\"../../assets/campus.cafe.logo.png\"\r\n            style=\"padding: 40px 80px\"\r\n          ></ion-img>\r\n        <!--\r\n        <ion-item>\r\n          <ion-label>Select School</ion-label>\r\n          <ion-select interface=\"action-sheet\"\r\n          :value=\"selectedOption\"\r\n          @ionChange=\"school= $event.target.value\"\r\n          >\r\n            <ion-select-option value=\"qa2\">QA2</ion-select-option>\r\n            <ion-select-option value=\"qa3\" selected>QA3</ion-select-option>\r\n            <ion-select-option value=\"school\">school</ion-select-option>\r\n            <ion-select-option value=\"college\">college</ion-select-option>\r\n          </ion-select>\r\n        </ion-item>\r\n        -->\r\n          <h3 style=\"color:red;padding:0 10px;text-align:center;\" v-if=\"loginError == true\">Incorrect email or password!</h3>        \r\n        <ion-item style=\"padding:0 20px;\">\r\n          <!--<ion-input placeholder=\"Email\" v-model=\"userInfo.username\">joeey.fergusonn</ion-input>-->\r\n          <ion-input placeholder=\"Email\" v-model=\"userInfo.username\"></ion-input>\r\n        </ion-item>\r\n        <ion-item style=\"padding:0 20px;\">\r\n          <!--<ion-input placeholder=\"Password\" type=\"password\" v-model=\"userInfo.password\">660090023</ion-input>-->\r\n          <ion-input placeholder=\"Password\" type=\"password\" v-model=\"userInfo.password\"  ></ion-input>\r\n        </ion-item>\r\n        \r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n  <ion-row\r\n    ><ion-col size=\"12\" style=\"text-align: center\">\r\n      <!--<ion-button expand=\"block\" @click=\"() => router.push('/classList')\">-->\r\n        <ion-button expand=\"block\" @click=\"loginSubmit()\" style=\"--background:#ff796a;padding:0 80px;\">\r\n        <ion-icon slot=\"start\" :icon=\"lockOpenOutline\"></ion-icon>\r\n        Login\r\n      </ion-button>\r\n    </ion-col></ion-row\r\n  >\r\n</base-layout>\r\n</template>\r\n<script>\r\nimport { IonInput, IonItem} from \"@ionic/vue\";\r\nimport { lockOpenOutline, timeOutline, alarmOutline } from \"ionicons/icons\";\r\n\r\nimport { useRouter } from \"vue-router\";\r\nimport { IonImg } from \"@ionic/vue\";\r\n\r\n//import { Storage } from '@ionic/storage';\r\n\r\nexport default {\r\n  name: \"login\",\r\n  components: { IonInput, IonItem, IonImg },\r\n  setup() {\r\n    const router = useRouter();\r\n    return { router };\r\n  },\r\n  data() {\r\n    return {\r\n      lockOpenOutline,\r\n      timeOutline,\r\n      alarmOutline,\r\n      img: \"../../assets/campus.cafe.logo.png\",\r\n      schools:[],\r\n      school:'',\r\n      loginError: false,\r\n      userInfo: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // check for saved token from local storage\r\n    // check saved school server name\r\n    // both must not null\r\n    // if got token ping server,  \r\n    //    if working, move to next page     \r\n    //    not working, stay\r\n    // no token stay\r\n    loadToken(){\r\n        var token = localStorage.getItem('token');\r\n        console.log(token);\r\n    },\r\n\r\n    createStorage() {\r\n        //var currStorage = window.localStorage;\r\n        localStorage.setItem('token', this.$store.getters.getToken)\r\n        console.log(\"token saved to localstorage\");\r\n    },\r\n    // get list of schools\r\n    // build select dropdown\r\n    // should get from a fixed server without anything.\r\n    getSchools(){\r\n      \r\n    },\r\n    \r\n    loginSubmit(){\r\n      const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json', \r\n                  'Authorization': 'BearerÂ token'},\r\n        body: JSON.stringify({\"username\":this.userInfo.username,\"password\":this.userInfo.password})          \r\n        //body: JSON.stringify({\"username\":\"instructor2\",\"password\":\"instructor2\"})\r\n        //body: JSON.stringify({\"username\":\"student2\",\"password\":\"student2\"})\r\n        //body: JSON.stringify({\"username\":\"student3\",\"password\":\"student3\"})\r\n\r\n      };\r\n      fetch('/cafeweb/mobileApi/authenticate/token', requestOptions)\r\n        .then(async response => {\r\n          const data = await response.json();\r\n\r\n          // check for error response\r\n          if (!response.ok) {\r\n            // get error message from body or default to response status\r\n            const error = (data && data.message) || response.status;\r\n            return Promise.reject(error);\r\n          }\r\n          //console.log(data.token);\r\n          this.$store.commit(\"addToken\",data.token);\r\n          //this.$store.commit(\"addSchool\",this.school);\r\n          console.log(\"saved to state \"+this.$store.getters.getToken);\r\n          //console.log('school = ' + this.$store.getters.getSchool);\r\n          this.createStorage();\r\n          this.$router.push('/classList');\r\n          //this.postId = data.id;\r\n          //this.getClasses();\r\n        })\r\n        .catch(error => {\r\n          this.errorMessage = error;\r\n          console.error('There was an error!', error);\r\n          this.loginError = true;\r\n\r\n          // push to next page no matter what\r\n          this.$router.push('/classList');\r\n\r\n          // goto new login page\r\n          //window.location.href = \"/cafeweb/mobile/\";\r\n        });\r\n    },\r\n\r\n/*\r\n    getClasses(){\r\n      let myToken = this.$store.getters.getToken;\r\n\r\n      const requestOptions = {\r\n        method: 'GET',\r\n        headers: { 'Content-Type': 'application/json', \r\n                  'Authorization': 'Bearer '+myToken}\r\n      };\r\n      fetch('/cafeweb/mobileApi/student/classes', requestOptions)\r\n      //fetch('/cafeweb/mobileApi/authenticate/whoAmI', requestOptions)\r\n        .then(async response => {\r\n          const data = await response.json();\r\n\r\n          // check for error response\r\n          if (!response.ok) {\r\n            // get error message from body or default to response status\r\n            const error = (data && data.message) || response.status;\r\n            return Promise.reject(error);\r\n          }\r\n          console.log(data);\r\n          //this.postId = data.id;\r\n        })\r\n        .catch(error => {\r\n          this.errorMessage = error;\r\n          console.error('There was an error!', error);\r\n        });\r\n    },\r\n*/\r\n\r\n\r\n  },\r\n  mounted: function () {\r\n    this.loadToken();\r\n    console.log('login page mounted');\r\n  },\r\n};\r\n</script>","import { render } from \"./loginPage.vue?vue&type=template&id=b90578bc\"\nimport script from \"./loginPage.vue?vue&type=script&lang=js\"\nexport * from \"./loginPage.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}