(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-588b6590"],{"1dde":function(t,e,n){var s=n("d039"),r=n("b622"),c=n("2d00"),o=r("species");t.exports=function(t){return c>=51||!s((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"2ca4":function(t,e,n){"use strict";n.r(e);n("99af");var s=n("7a23"),r={style:{margin:"0px","font-weight":"bold"}},c={style:{margin:"0px","margin-top":"10px"}},o={style:{margin:"0px","margin-top":"10px"}},i={style:{color:"grey"}},u={key:0},a={style:{color:"grey"}},l={style:{color:"grey"}},d=Object(s["h"])("span",{style:{color:"red"}},"Absent",-1),b={style:{"font-weight":"bold"}},f={key:0},h=Object(s["h"])("span",{style:{color:"red"}},"Absent",-1),O=Object(s["g"])(" Accept ");function g(t,e,n,g,j,m){var k=this,p=Object(s["y"])("ion-spinner"),y=Object(s["y"])("ion-col"),T=Object(s["y"])("ion-row"),D=Object(s["y"])("ion-grid"),C=Object(s["y"])("ion-img"),I=Object(s["y"])("ion-toggle"),v=Object(s["y"])("ion-item"),A=Object(s["y"])("ion-list"),S=Object(s["y"])("ion-icon"),w=Object(s["y"])("ion-button"),H=Object(s["y"])("base-layout");return Object(s["q"])(),Object(s["e"])(H,{"page-title":"Faculty Acceptance","page-default-back-link":"classList"},{default:Object(s["D"])((function(){return[Object(s["h"])(D,null,{default:Object(s["D"])((function(){return[Object(s["h"])(T,null,{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"12",style:{"text-align":"center"}},{default:Object(s["D"])((function(){return[1==j.stillLoading?(Object(s["q"])(),Object(s["e"])(p,{key:0,color:"primary"})):Object(s["f"])("",!0),Object(s["h"])("h2",r,Object(s["A"])(j.ClassTitle)+" ("+Object(s["A"])(j.classID)+")",1),Object(s["h"])("h4",c,Object(s["A"])(j.currentDate),1),Object(s["h"])("h4",o,Object(s["A"])(j.classStartTime)+" - "+Object(s["A"])(j.classEndTime),1)]})),_:1})]})),_:1})]})),_:1}),Object(s["h"])(A,{style:{"padding-right":"10px"}},{default:Object(s["D"])((function(){return[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["w"])(j.studentList,(function(t){return Object(s["q"])(),Object(s["e"])(v,{key:t.studentID,style:{"margin-right":"0px","--padding-start":"10px"}},{default:Object(s["D"])((function(){return["graded"==t.enrollmentStatus?(Object(s["q"])(),Object(s["e"])(D,{key:0,style:{opacity:"0.5"}},{default:Object(s["D"])((function(){return[Object(s["h"])(T,{"ion-no-padding":""},{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"2"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,[Object(s["h"])(C,{src:t.imageURI},null,8,["src"])])]})),_:2},1024),Object(s["h"])(y,{size:"10"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,[Object(s["h"])("span",i,Object(s["A"])(t.firstName)+" "+Object(s["A"])(t.lastName)+" (ID: "+Object(s["A"])(t.studentId)+")",1)]),"Y"!=t.isAbsent?(Object(s["q"])(),Object(s["e"])("div",u,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["w"])(t.clockHistory,(function(e){return Object(s["q"])(),Object(s["e"])(T,{style:{"align-content":"flex-start"},key:e.studentID},{default:Object(s["D"])((function(){return[t.clockHistory.length>0?(Object(s["q"])(),Object(s["e"])(y,{key:0,size:"5"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",a,Object(s["A"])(k.changeTimeTo12(e.studentClockInDateTime)),1)]})),_:2},1024)):Object(s["f"])("",!0),t.clockHistory.length>0?(Object(s["q"])(),Object(s["e"])(y,{key:1,size:"5"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",l,Object(s["A"])(k.changeTimeTo12(e.studentClockOutDateTime)),1)]})),_:2},1024)):Object(s["f"])("",!0)]})),_:2},1024)})),128))])):Object(s["f"])("",!0),0==t.clockHistory.length||"Y"==t.isAbsent?(Object(s["q"])(),Object(s["e"])(T,{key:1,style:{"align-content":"flex-start"}},{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"12"},{default:Object(s["D"])((function(){return[d]})),_:1})]})),_:1})):Object(s["f"])("",!0)]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)):Object(s["f"])("",!0),void 0==t.enrollmentStatus||null==t.enrollmentStatus?(Object(s["q"])(),Object(s["e"])(D,{key:1},{default:Object(s["D"])((function(){return[Object(s["h"])(T,{"ion-no-padding":""},{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"2"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,[Object(s["h"])(C,{src:t.imageURI},null,8,["src"])])]})),_:2},1024),Object(s["h"])(y,{size:"8",onClick:function(e){return g.router.push("/editTimes/".concat(j.classIDLong,"/").concat(t.studentId))}},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,[Object(s["h"])("span",b,Object(s["A"])(t.firstName)+" "+Object(s["A"])(t.lastName)+" (ID: "+Object(s["A"])(t.studentId)+")",1)]),"Y"!=t.isAbsent?(Object(s["q"])(),Object(s["e"])("div",f,[(Object(s["q"])(!0),Object(s["e"])(s["a"],null,Object(s["w"])(t.clockHistory,(function(e){return Object(s["q"])(),Object(s["e"])(T,{style:{"align-content":"flex-start"},key:e.studentID},{default:Object(s["D"])((function(){return[t.clockHistory.length>0?(Object(s["q"])(),Object(s["e"])(y,{key:0,size:"5"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,Object(s["A"])(k.changeTimeTo12(e.studentClockInDateTime)),1)]})),_:2},1024)):Object(s["f"])("",!0),t.clockHistory.length>0?(Object(s["q"])(),Object(s["e"])(y,{key:1,size:"5"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,Object(s["A"])(k.changeTimeTo12(e.studentClockOutDateTime)),1)]})),_:2},1024)):Object(s["f"])("",!0)]})),_:2},1024)})),128))])):Object(s["f"])("",!0),0==t.clockHistory.length||"Y"==t.isAbsent?(Object(s["q"])(),Object(s["e"])(T,{key:1,style:{"align-content":"flex-start"},onClick:function(e){return g.router.push("/editTimes/".concat(j.classIDLong,"/").concat(t.studentId))}},{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"12"},{default:Object(s["D"])((function(){return[h]})),_:1})]})),_:1},8,["onClick"])):Object(s["f"])("",!0)]})),_:2},1032,["onClick"]),0==j.absentIfNoTimeClockEntries?(Object(s["q"])(),Object(s["e"])(y,{key:0,size:"2"},{default:Object(s["D"])((function(){return[Object(s["h"])("div",null,[Object(s["h"])(I,{slot:"start",checked:"Y"!=t.isAbsent,onClick:function(e){return k.markAbsent(e,t.studentId)}},null,8,["checked","onClick"])])]})),_:2},1024)):Object(s["f"])("",!0)]})),_:2},1024)]})),_:2},1024)):Object(s["f"])("",!0)]})),_:2},1024)})),128))]})),_:1}),Object(s["h"])(D,null,{default:Object(s["D"])((function(){return[Object(s["h"])(T,null,{default:Object(s["D"])((function(){return[Object(s["h"])(y,{size:"12"},{default:Object(s["D"])((function(){return[Object(s["h"])(w,{expand:"block",onClick:m.onSubmit,style:{"--background":"#ff796a"}},{default:Object(s["D"])((function(){return[Object(s["h"])(S,{slot:"start",icon:j.paperPlaneOutline},null,8,["icon"]),O]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}n("7db0"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("4d90"),n("1276"),n("96cf");var j=n("1da1"),m=n("8a30"),k=n("ff79"),p=n("6c02"),y={components:{IonList:m["k"],IonItem:m["j"]},setup:function(){var t=Object(p["f"])();return{router:t}},data:function(){return{classes:[],students:[],studentList:[],currentDate:"",msg:"hi",userName:"",userRole:"",userID:"",classID:"",classIDLong:"",ClassTitle:"",refreshOutline:k["u"],paperPlaneOutline:k["t"],classStartTime:"",classEndTime:"",cuInsClass:{},stillLoading:!0,absentIfNoTimeClockEntries:!1}},methods:{getTodayDate:function(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return t=n+"/"+e+"/"+s+String(t.getHours()).padStart(2,"0")+String(t.getMinutes()).padStart(2,"0"),t},getCurrentTime:function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),s=e>=12?"PM":"AM";e%=12,e=e||12,n=n<10?"0"+n:n,t=e+":"+n+" "+s,console.log("current time is "+t.toString()),this.currentTime=t},getTodayDay:function(){var t=new Date,e=t.getFullYear().toString(),n=t.getMonth()+1;n<10&&(n="0"+n.toString());var s=t.getDate();return s<10&&(s="0"+s.toString()),t.getDate(),e+n+s},getStudents:function(){var t=this;this.stillLoading=!0,console.log("class info = "+JSON.stringify(this.$store.getters.cuInsClass(this.$route.params.id))),this.classIDLong=this.$route.params.id,this.cuInsClass=this.$store.getters.cuInsClass(this.$route.params.id);var e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.getters.getToken}},n="/cafeweb/mobileApi/instructor/classClockTimes?date="+this.getTodayDay()+"&semester="+this.cuInsClass.semester+"&courseNumber="+this.cuInsClass.courseNumber+"&courseSection="+this.cuInsClass.courseSection+"&labSection="+this.cuInsClass.labSection;fetch(n,e).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(n){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:s=e.sent,n.ok?(console.log("studnet list = "+JSON.stringify(s)),console.log("class info = "+JSON.stringify(t.$store.getters.cuInsClass(t.$route.params.id))),t.absentIfNoTimeClockEntries=s.absentIfNoTimeClockEntries,t.ClassTitle=t.cuInsClass.title,t.classID=t.cuInsClass.courseNumber,t.classStartTime=t.changeTimeTo12(t.cuInsClass.startDateTime),t.classEndTime=t.changeTimeTo12(t.cuInsClass.endDateTime),t.studentList=t.cleanupStudentData(s),t.$store.commit("addStudentList",s.students),t.stillLoading=!1):t.openToastFailed();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.errorMessage=e,console.error("There was an error!",e),t.openToastFailed(),t.stillLoading=!1}))},onSubmit:function(){var t=this,e=this.$store.getters.getToken;console.log("token is "+e);var n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.getters.getToken}};fetch("/cafeweb/mobileApi/instructor/confirmClassClockTimes?semester="+this.cuInsClass.semester+"&courseNumber="+this.cuInsClass.courseNumber+"&courseSection="+this.cuInsClass.courseSection+"&labSection="+this.cuInsClass.labSection+"&date="+this.getTodayDay(),n).then(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(n){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:if(s=e.sent,n.ok){e.next=6;break}return r=s&&s.message||n.status,e.abrupt("return",Promise.reject(r));case 6:console.log("accepted all time"),t.openToastSuccessful();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.errorMessage=e,console.error("There was an error!",e),t.openToastFailed()}))},openToastSuccessful:function(){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["q"].create({message:"Submit Successful.",position:"top",duration:1e3,color:"success"});case 2:n=e.sent,n.present(),n.onDidDismiss().then((function(){t.$router.go(-1)}));case 5:case"end":return e.stop()}}),e)})))()},openToastFailed:function(){return Object(j["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["q"].create({message:"Failed get student list, server error, please try again.",position:"top",duration:1e3,color:"danger"});case 2:e=t.sent,e.present();case 4:case"end":return t.stop()}}),t)})))()},changeTimeTo12:function(t){if(null==t||void 0==t||""==t)return"";var e=t.split("T")[1].split(":")[0],n=t.split("T")[1].split(":")[1],s=" AM";return"0"==e[0]?(s=" AM",e=e[1]):e<=11?s=" AM":12==e?s=" PM":e>12&&(s=" PM",e-=12),e+":"+n+s},cleanupStudentData:function(t){var e=t.students;if(t.students.length>0)for(var n=0;n<t.students.length;n++){if(t.students[n].clockHistory.length>0)for(var s=0;s<t.students[n].clockHistory.length;s++)void 0==t.students[n].clockHistory[s].clockId&&(t.students[n].clockHistory[s]["clockId"]=""),void 0==t.students[n].clockHistory[s].instructorClockInDateTime&&(t.students[n].clockHistory[s]["instructorClockInDateTime"]=""),void 0==t.students[n].clockHistory[s].instructorClockOutDateTime&&(t.students[n].clockHistory[s]["instructorClockOutDateTime"]=""),void 0==t.students[n].clockHistory[s].studentClockInDateTime&&void 0==t.students[n].clockHistory[s].studentClockOutDateTime||""==t.students[n].clockHistory[s].studentClockInDateTime&&""==t.students[n].clockHistory[s].studentClockOutDateTime?t.students[n].clockHistory[s]["canDel"]=!0:t.students[n].clockHistory[s]["canDel"]=!1,""!=t.students[n].clockHistory[s]["instructorClockInDateTime"]&&(t.students[n].clockHistory[s]["studentClockInDateTime"]=t.students[n].clockHistory[s].instructorClockInDateTime),""!=t.students[n].clockHistory[s]["instructorClockOutDateTime"]&&(t.students[n].clockHistory[s]["studentClockOutDateTime"]=e[n].clockHistory[s].instructorClockOutDateTime),void 0==t.students[n].clockHistory[s].isAbsent&&(t.students[n].clockHistory[s]["isAbsent"]=""),"Y"==t.students[n].clockHistory[s].isAbsent&&(void 0==t.students[n].isAbsent&&(t.students[n]["isAbsent"]="Y"),console.log("isAbsent flag got"));else if(1!=this.absentIfNoTimeClockEntries){var r={};r={studentClockInDateTime:this.cuInsClass.startDateTime,studentClockOutDateTime:this.cuInsClass.endDateTime,instructorClockInDateTime:this.cuInsClass.startDateTime,instructorClockOutDateTime:this.cuInsClass.endDateTime},t.students[n].clockHistory.push(r),t.students[n].isAbsent=""}void 0!=t.students[n].imageURI&&null!=t.students[n].imageURI||(t.students[n].imageURI="../../assets/default-avatar.png")}else console.log("no students found");return console.log("student list after cleanup"+JSON.stringify(t.students)),t.students},markAbsent:function(t,e){console.log("student id ="+e),console.log("checked ="+t.currentTarget.checked),t.currentTarget.checked?this.submitAddAbsent(e):this.submitDelAbsent(e)},submitAddAbsent:function(t){var e=this,n=this.$store.getters.getToken;console.log("token is "+n);var s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.getters.getToken}};fetch("/cafeweb/mobileApi/instructor/studentAbsent?semester="+this.cuInsClass.semester+"&courseNumber="+this.cuInsClass.courseNumber+"&courseSection="+this.cuInsClass.courseSection+"&labSection="+this.cuInsClass.labSection+"&date="+this.getTodayDay()+"&studentId="+t,s).then(function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.ok){t.next=4;break}return e.errorCount++,e.errorAbsent=!0,t.abrupt("return",Promise.reject(n.status));case 4:console.log("mark absent Y"),e.errorAbsent=!1,e.getStudents();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.errorMessage=t,console.error("There was an error!",t),e.errorCount++,e.errorAbsent=!0}))},submitDelAbsent:function(t){var e=this,n=this.$store.getters.getToken;console.log("token is "+n);var s={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.$store.getters.getToken}},r=this.studentList.find((function(e){return e.studentId==t})).clockHistory.find((function(t){return"Y"==t.isAbsent})).clockId;fetch("/cafeweb/mobileApi/instructor/studentAbsent?semester="+this.cuInsClass.semester+"&courseNumber="+this.cuInsClass.courseNumber+"&courseSection="+this.cuInsClass.courseSection+"&labSection="+this.cuInsClass.labSection+"&date="+this.getTodayDay()+"&studentId="+t+"&clockId="+r,s).then(function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.ok){t.next=4;break}return e.errorCount++,e.errorAbsent=!0,t.abrupt("return",Promise.reject(n.status));case 4:console.log("mark absent N"),e.errorAbsent=!1,e.getStudents();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.errorMessage=t,console.error("There was an error!",t),e.errorCount++,e.errorAbsent=!0}))}},mounted:function(){this.getStudents();var t=new Date;this.currentDate=t.toDateString()},watch:{$route:function(t,e){"studentList"==t.name&&this.getStudents(),console.log("studentListPage"+t+e)}}};n("3de8");y.render=g;e["default"]=y},"3de8":function(t,e,n){"use strict";n("56a4")},"56a4":function(t,e,n){},8418:function(t,e,n){"use strict";var s=n("c04e"),r=n("9bf2"),c=n("5c6c");t.exports=function(t,e,n){var o=s(e);o in t?r.f(t,o,c(0,n)):t[o]=n}},"99af":function(t,e,n){"use strict";var s=n("23e7"),r=n("d039"),c=n("e8b5"),o=n("861d"),i=n("7b0b"),u=n("50c4"),a=n("8418"),l=n("65f0"),d=n("1dde"),b=n("b622"),f=n("2d00"),h=b("isConcatSpreadable"),O=9007199254740991,g="Maximum allowed index exceeded",j=f>=51||!r((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),m=d("concat"),k=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:c(t)},p=!j||!m;s({target:"Array",proto:!0,forced:p},{concat:function(t){var e,n,s,r,c,o=i(this),d=l(o,0),b=0;for(e=-1,s=arguments.length;e<s;e++)if(c=-1===e?o:arguments[e],k(c)){if(r=u(c.length),b+r>O)throw TypeError(g);for(n=0;n<r;n++,b++)n in c&&a(d,b,c[n])}else{if(b>=O)throw TypeError(g);a(d,b++,c)}return d.length=b,d}})}}]);
//# sourceMappingURL=chunk-588b6590.68af5373.js.map